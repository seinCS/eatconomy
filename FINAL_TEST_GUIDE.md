# 배포 전 최종 테스트 가이드

## 테스트 목표
프로덕션 배포 전 전체 시스템의 안정성과 기능을 확인합니다.

## 테스트 환경 준비

### 1. 환경 변수 확인
- [ ] 백엔드 `.env` 파일 확인
- [ ] 프론트엔드 `.env` 파일 확인
- [ ] 필수 환경 변수 설정 확인

### 2. 데이터베이스 확인
- [ ] PostgreSQL 연결 확인
- [ ] Prisma 마이그레이션 상태 확인

## 테스트 시나리오

### 1. 서버 시작 테스트
- [ ] 백엔드 서버 정상 시작
- [ ] 프론트엔드 서버 정상 시작
- [ ] Winston 로깅 정상 동작

### 2. 인증 플로우 테스트
- [ ] 카카오 로그인 버튼 클릭
- [ ] 카카오 인증 페이지 리다이렉트
- [ ] 인증 후 JWT 토큰 발급
- [ ] 사용자 정보 조회 (`/api/auth/me`)
- [ ] 로그아웃 기능

### 3. API 엔드포인트 테스트
- [ ] 사용자 정보 조회 (`GET /api/users/me`)
- [ ] 사용자 설정 업데이트 (`PUT /api/users/preferences`)
- [ ] 냉장고 아이템 조회/추가/삭제 (`GET/POST/DELETE /api/fridge`)
- [ ] 식단 조회/업데이트 (`GET/PUT /api/plans`)
- [ ] 레시피 선호도 조회/업데이트 (`GET/POST /api/recipes`)
- [ ] 장보기 목록 조회/체크 (`GET/PUT /api/shopping-list`)
- [ ] 식사 완료 상태 조회/업데이트 (`GET/PUT /api/meals`)

### 4. 에러 핸들링 테스트
- [ ] 잘못된 요청 시 Validation 에러 처리
- [ ] 인증되지 않은 요청 시 401 에러 처리
- [ ] 존재하지 않는 리소스 요청 시 404 에러 처리
- [ ] 서버 에러 시 500 에러 처리
- [ ] Rate Limiting 동작 확인 (429 에러)

### 5. 프론트엔드 기능 테스트
- [ ] 홈 페이지 로드
- [ ] 냉장고 페이지 기능
- [ ] 스와이프 페이지 기능
- [ ] 식단표 페이지 기능
- [ ] 장보기 목록 페이지 기능
- [ ] 프로필 페이지 기능
- [ ] 에러 바운더리 동작 확인

### 6. 로깅 테스트
- [ ] 백엔드 로그 파일 생성 확인 (`logs/combined.log`, `logs/error.log`)
- [ ] 에러 로그 정상 기록 확인
- [ ] 프론트엔드 에러 추적 동작 확인

## 테스트 실행 방법

### 1. 백엔드 서버 시작
```bash
cd backend
npm run start:dev
```

### 2. 프론트엔드 서버 시작
```bash
npm run dev
```

### 3. 수동 테스트
1. 브라우저에서 `http://localhost:3000` 접속
2. 카카오 로그인 수행
3. 각 페이지 기능 테스트
4. 네트워크 탭에서 API 요청 확인
5. 콘솔에서 에러 확인

### 4. API 테스트 (선택사항)
```bash
# 인증 테스트
curl -X GET http://localhost:3001/api/auth/me \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 냉장고 아이템 조회
curl -X GET http://localhost:3001/api/fridge \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

## 예상 결과

### 정상 동작
- ✅ 모든 서버 정상 시작
- ✅ 로그인 플로우 완료
- ✅ 모든 API 엔드포인트 정상 응답
- ✅ 에러 메시지 사용자 친화적 표시
- ✅ 로그 파일 정상 생성

### 주의사항
- ⚠️ Rate Limiting 테스트 시 429 에러는 정상 동작
- ⚠️ 개발 환경에서는 파일 로그가 생성되지 않을 수 있음 (프로덕션 환경에서만 생성)

## 테스트 완료 체크리스트

- [ ] 서버 시작 테스트 완료
- [ ] 인증 플로우 테스트 완료
- [ ] API 엔드포인트 테스트 완료
- [ ] 에러 핸들링 테스트 완료
- [ ] 프론트엔드 기능 테스트 완료
- [ ] 로깅 테스트 완료
- [ ] 모든 테스트 통과

## 문제 발생 시

1. **서버 시작 실패**
   - 환경 변수 확인
   - 포트 충돌 확인
   - 데이터베이스 연결 확인

2. **로그인 실패**
   - 카카오 개발자 콘솔 설정 확인
   - Redirect URI 확인
   - 환경 변수 확인

3. **API 에러**
   - 네트워크 탭에서 에러 응답 확인
   - 백엔드 로그 확인
   - 데이터베이스 연결 확인

4. **빌드 에러**
   - `npm install` 재실행
   - `npm run build` 재실행
   - 타입 에러 확인

